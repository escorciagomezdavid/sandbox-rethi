@IsTest
public class lwcFileUploadTest {
    public class relatedFile {
        public String base64;
	    public String Title;
    }
    @IsTest
    public static void saveFileTest(){
        Object base64='data:image/jpeg;base64,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';
        Map<String,Object> files = new Map<String,Object>();
        files.put('Title','Calendario_Montaje.png');
        files.put('base64',base64);
        List<Map<String, Object>> file = new List<Map<String, Object>>();
        file.add(files);
        String identificacion = 'ID001';
        String codigoProducto = '234567';
		String numeroOp = '2599399';
        TestDataFactory.crearOportunityAndProducts('JA', 'JA_C1_2021_2599399', null);
        Account getCuenta = [Select ID from Account where Identificacion__c = :identificacion];
        System.debug(getCuenta);
		Opportunity getIdOpp = [Select ID from Opportunity where Numero_OP__c = :numeroOp];
		System.debug(getIdOpp.Id);
		OpportunityLineItem producto = [Select ID from OpportunityLineItem where ProductCode = :codigoProducto AND OpportunityId = :getIdOpp.ID];
		System.debug(producto.ID);
		TestDataFactory.crearCaseGarantia(getCuenta.Id, 'SERVICIO DE GARANTIA', getIdOpp.Id, producto.ID, 'Abierto');
        Case caso = [select ID,CaseNumber from Case where AccountId =: getCuenta.ID]; 
        lwcFileUpload.saveFile(caso.ID,file);               
    }
    
     @IsTest
    public static void saveFileTestSinOp(){
        Object base64='data:image/jpeg;base64,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';
        Map<String,Object> files = new Map<String,Object>();
        files.put('Title','Calendario_Montaje.png');
        files.put('base64',base64);
        List<Map<String, Object>> file = new List<Map<String, Object>>();
        file.add(files);
        String identificacion = 'ID001';
		TestDataFactory.createAccount(identificacion);
		Account getCuenta = [Select ID from Account where Identificacion__c = :identificacion];
		System.debug(getCuenta.ID);
		TestDataFactory.crearCaseGarantia(getCuenta.ID, 'SERVICIO DE GARANTIA', null, null, 'Abierto');
        Case caso = [select ID,CaseNumber from Case where AccountId =: getCuenta.ID];
        lwcFileUpload.saveFile(caso.ID,file);               
    }
    
    @IsTest
    public static void saveFileTestCallOut500(){
        Object base64='data:image/jpeg;base64,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';
        String endPoint = Endpoint__mdt.getInstance('Upload_Fotos_S3').URL__c;
        String body='';
        Map<String,Object> files = new Map<String,Object>();
        files.put('Title','Calendario_Montaje.png');
        files.put('base64',base64);
        List<Map<String, Object>> file = new List<Map<String, Object>>();
        file.add(files);
        String identificacion = 'ID001';
        String codigoProducto = '234567';
		String numeroOp = '2599399';
        TestDataFactory.crearOportunityAndProducts('JA', 'JA_C1_2021_2599399', null);
        Account getCuenta = [Select ID from Account where Identificacion__c = :identificacion];
        System.debug(getCuenta);
		Opportunity getIdOpp = [Select ID from Opportunity where Numero_OP__c = :numeroOp];
		System.debug(getIdOpp.Id);
		OpportunityLineItem producto = [Select ID from OpportunityLineItem where ProductCode = :codigoProducto AND OpportunityId = :getIdOpp.ID];
		System.debug(producto.ID);
		TestDataFactory.crearCaseGarantia(getCuenta.Id, 'SERVICIO DE GARANTIA', getIdOpp.Id, producto.ID, 'Abierto');
        Case caso = [select ID,CaseNumber from Case where AccountId =: getCuenta.ID]; 
        Test.startTest();
        Map<String, Object> objson = new Map<String, Object> ();
            objson.put('imagen_b64', base64);
			objson.put('pe_vcNumOrd', '1110009');
			objson.put('pe_vcCodProd', '12112');
			objson.put('pe_vcPerOrd', '2022');
            body = String.valueOf(JSON.Serialize(objson));
        Test.setMock(HttpCalloutMock.class, new JamarlwcFileUploadsMock(200));
        HttpResponse response  = JamarConsumoHTTP.callServiceExternalWithTimeOut(endPoint, body,'POST','25000');
        String contentType = response.getHeader('Content-Type');
        System.assert(contentType == 'application/json');
        String actualValue = response.getBody();
        System.debug(response.getBody());
        String expectedValue = '{"message":"Internal server error"}';
        System.assertEquals(actualValue, expectedValue);
        System.assertEquals(500, response.getStatusCode());
        Test.stopTest();
        lwcFileUpload.saveFile(caso.ID,file); 
    }
}