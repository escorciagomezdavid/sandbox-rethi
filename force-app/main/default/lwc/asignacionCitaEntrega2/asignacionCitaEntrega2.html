<template>
    <template if:true={showScreen1}>
        <lightning-card title="Opciones de Entrega" icon-name="utility:cart" class="final-message">
            <div class="calendar-table">
                <template if:true={deliveries}>
                    <table>
                        <thead id="product-body">
                            <tr>
                                <th class="td-font-samall">Descripcion</th>
                                <th class="td-font-samall">Entregas</th>
                                <th class="td-font-samall">Detalle</th>
                            </tr>
                        </thead>
                        <tbody class="product-dates">
                            <template for:each={deliveries} for:item="delivery">
                                <tr key={delivery.id}>
                                    <td class="td-font-samall">{delivery.desc}</td>
                                    <td class="td-align-left">
                                        {delivery.delivery_date_1}
                                        {delivery.delivery_date_2}
                                    </td>
                                    <td>
                                        <lightning-button label="Ver" onclick={showDetail}
                                            class="btn-lower"></lightning-button>
                                    </td>
                                </tr>
                            </template>
                        </tbody>
                    </table>
                </template>
            </div>
        </lightning-card>
    </template>

    <template if:true={showScreen2}>
        <lightning-card title="Opciones de Entrega" icon-name="utility:cart" class="final-message">
            <div class="calendar-table">
                <template if:true={firstDelivery}>
                    <table>
                        <thead id="first-delivery">
                            <tr>
                                <th class="td-font-samall">Codigo</th>
                                <th class="td-font-samall">Descripcion</th>
                                <th class="td-font-samall">Cant</th>
                            </tr>
                        </thead>
                        <tbody class="product-dates">
                            <template for:each={firstDelivery} for:item="product">
                                <tr key={product.sku}>
                                    <td class="td-font-samall">{product.sku}</td>
                                    <td class="td-align-left">Name Product</td>
                                    <td>{product.cantidad}</td>
                                    </td>
                                </tr>
                            </template>
                        </tbody>
                    </table>
                </template>
                <template if:true={secondDelivery}>
                    <table>
                        <thead id="second-delivery">
                            <tr>
                                <th class="td-font-samall">Codigo</th>
                                <th class="td-font-samall">Descripcion</th>
                                <th class="td-font-samall">Cant</th>
                            </tr>
                        </thead>
                        <tbody class="product-dates">
                            <template for:each={secondDelivery} for:item="product">
                                <tr key={product.sku}>
                                    <td class="td-font-samall">{product.sku}</td>
                                    <td class="td-align-left">Name Product</td>
                                    <td>{product.cantidad}</td>
                                    </td>
                                </tr>
                            </template>
                        </tbody>
                    </table>
                </template>
            </div>
            <div class="content-btn-lower">
                <lightning-button label="Calendario con Fechas Disponibles" onclick={nextScreen}
                    class="btn-lower"></lightning-button>
            </div>
        </lightning-card>
        <section class="slds-backdrop slds-backdrop_open" onclick={closeModal}></section>
        <div></div>
    </template>

    <template if:true={showScreenError}>
        <section role="dialog" tabindex="-1" class="slds-modal slds-fade-in-open">
            <section class="slds-modal__container">

                <lightning-card title="NO Lista Facturar" class="lc-listo-facturar-false">
                    <h2 class="final-message">La Oportunidad No se encuentra Lista a Facturar</h2>
                    <div class="content-btn-lower">
                        <lightning-button label="Cerrar" onclick={closeModal} class="btn-lower"></lightning-button>
                    </div>
                </lightning-card>

            </section>
        </section>
        <section class="slds-backdrop slds-backdrop_open" onclick={closeModal}></section>
        <div></div>
    </template>


    <template if:true={showScreen3}>
        <section role="dialog" tabindex="-1" class="slds-modal slds-fade-in-open">
            <section class="slds-modal__container">

                <lightning-card class="c-lightning-card" title="Entregas Disponibles" icon-name="utility:event">
                    <div class="btn-close-modal">
                        <lightning-button label="❌" onclick={closeModal}></lightning-button>
                    </div>
                    <div id="calendar" class="calendar-table">
                        <div>
                            <h2 class="month-year" lwc:dom="manual"></h2>
                        </div>

                        <table>
                            <thead id="calendar-body">
                                <tr>
                                    <th>Dom</th>
                                    <th>Lun</th>
                                    <th>Mar</th>
                                    <th>Mie</th>
                                    <th>Jue</th>
                                    <th>Vie</th>
                                    <th>Sab</th>
                                </tr>
                            </thead>
                            <tbody class="calendar-dates" lwc:dom="manual"></tbody>
                        </table>
                        <div id="calendar-header" class="calendar-header">
                            <lightning-button class="prev-month" label="<" onclick={prevMonth}></lightning-button>
                            <lightning-button class="next-month" label=">" onclick={nextMonth}></lightning-button>
                        </div>
                    </div>
                    <template if:true={datesEntrega}></template>
                    <div class="content-btn-lower">
                        <lightning-button class="btn-lower" label="Asignar Fecha Entrega"
                            onclick={assignFechaEntrega}></lightning-button>
                    </div>
                </lightning-card>

            </section>
        </section>
        <section class="slds-backdrop slds-backdrop_open"></section>
    </template>

    <template if:true={showScreenReasignar}>
        <section role="dialog" tabindex="-1" class="slds-modal slds-fade-in-open">
            <section class="slds-modal__container">

                <lightning-card title="OP Tiene Cita Asignada" class="lc-listo-facturar-false">
                    <h2 class="final-message">Su Orden de Pedido ya tiene Cita Asignada ¿Desea Reasignarla?</h2>
                    <div class="content-btn-lower">
                        <div>
                            <lightning-button label="Si" onclick={reasignacion} class="btn-lower"></lightning-button>
                            <lightning-button label="No" onclick={closeModal} class="btn-lower"></lightning-button>
                        </div>

                    </div>
                </lightning-card>


            </section>
        </section>
        <section class="slds-backdrop slds-backdrop_open" onclick={closeModal}></section>
        <div></div>
    </template>

    <template if:true={showScreen4}>
        <section role="dialog" tabindex="-1" class="slds-modal slds-fade-in-open">
            <section class="slds-modal__container">

                <lightning-card class="c-lightning-card" title="Armados Disponibles" icon-name="utility:event">
                    <div class="btn-close-modal">
                        <lightning-button label="❌" onclick={closeModal}></lightning-button>
                    </div>
                    <div id="calendar-armado" class="calendar-table">
                        <div>
                            <h2 class="month-year-armado" lwc:dom="manual"></h2>
                        </div>
                        <table>
                            <thead id="calendar-armado-body">
                                <tr>
                                    <th>Dom</th>
                                    <th>Lun</th>
                                    <th>Mar</th>
                                    <th>Mie</th>
                                    <th>Jue</th>
                                    <th>Vie</th>
                                    <th>Sab</th>
                                </tr>
                            </thead>
                            <tbody class="calendar-dates-armado" lwc:dom="manual"></tbody>
                        </table>
                        <div id="calendar-armado-header" class="calendar-armado-header">
                            <lightning-button class="prev-month" label="<" onclick={prevMonthArmado}></lightning-button>
                            <lightning-button class="next-month" label=">" onclick={nextMonthArmado}></lightning-button>
                        </div>
                    </div>
                    <template if:true={datesArmado}></template>
                    <div class="content-btn-lower">
                        <lightning-button class="btn-lower" label="Asignar Fecha Armado"
                            onclick={assignFechaArmado}></lightning-button>
                    </div>
                </lightning-card>

            </section>
        </section>
        <section class="slds-backdrop slds-backdrop_open"></section>
    </template>

    <template if:true={showScreen5}>
        <section role="dialog" tabindex="-1" class="slds-modal slds-fade-in-open">
            <section class="slds-modal__container">

                <lightning-card title="Proceso Concluido Con Exito" icon-name="utility:user" class="final-message">
                    <div class="calendar-table">
                        <table>
                            <thead id="table-result">
                                <tr>
                                    <th>Fecha Entrega</th>
                                    <th>Fecha Armado</th>
                                </tr>
                            </thead>
                            <tbody class="product-dates">
                                <tr>
                                    <td>{datesSelected}</td>
                                    <td>{datesSelectedArmado}</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="final-message">Ya puedes Cerrar y tomarte un café 😎</div>
                    <div class="content-btn-lower">
                        <lightning-button label="Cerrar" onclick={refreshPage} class="btn-lower"></lightning-button>
                    </div>

                </lightning-card>

            </section>
        </section>
        <section class="slds-backdrop slds-backdrop_open"></section>
    </template>
</template>