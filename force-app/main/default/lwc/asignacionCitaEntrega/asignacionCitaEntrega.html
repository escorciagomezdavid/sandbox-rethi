<template>
    <template if:true={showScreen1}>
        <lightning-button label="Asignar Cita" onclick={nextScreen}></lightning-button>
    </template>

    <template if:true={showScreen2}>
        <section role="dialog" tabindex="-1" class="slds-modal slds-fade-in-open">
            <section class="slds-modal__container">

                <lightning-card title="Productos de la OP" icon-name="utility:cart" class="lc-listo-facturar-true">
                    <div class="btn-close-modal">
                        <lightning-button label="❌" onclick={closeModal}></lightning-button>
                    </div>
                    <div class="calendar-table" onrender={renderCalendar}>
                        <template if:true={products}>
                            <table>
                                <thead id="product-body">
                                    <tr>
                                        <th>Codigo</th>
                                        <th>Descripcion</th>
                                        <th>Cantidad</th>
                                        <th>Url</th>
                                    </tr>
                                </thead>
                                <tbody class="product-dates">
                                    <template for:each={products} for:item="product">
                                        <tr key={product.Id}>
                                            <td>{product.ProductCode}</td>
                                            <td class="td-align-left">{product.Product2.Description}</td>
                                            <td>{product.Quantity}</td>
                                            <td class="td-align-left"><a href={product.Product2.DisplayUrl}
                                                    target="_blank">Ver</a></td>
                                        </tr>
                                    </template>
                                </tbody>
                            </table>
                        </template>
                    </div>
                    <div class="content-btn-lower">
                        <lightning-button label="Calendario con Fechas Disponibles" onclick={nextScreen}
                            class="btn-lower"></lightning-button>
                    </div>
                </lightning-card>

            </section>
        </section>
        <section class="slds-backdrop slds-backdrop_open" onclick={closeModal}></section>
        <div></div>
    </template>

    <template if:true={showScreenError}>
        <section role="dialog" tabindex="-1" class="slds-modal slds-fade-in-open">
            <section class="slds-modal__container">

                <lightning-card title="La Oportunidad No se encuentra Lista a Facturar" class="lc-listo-facturar-false">
                    <div class="content-btn-lower">
                        <lightning-button label="Cerrar" onclick={closeModal} class="btn-lower"></lightning-button>
                    </div>
                </lightning-card>


            </section>
        </section>
        <section class="slds-backdrop slds-backdrop_open" onclick={closeModal}></section>
        <div></div>
    </template>


    <template if:true={showScreen3}>
        <section role="dialog" tabindex="-1" class="slds-modal slds-fade-in-open">
            <section class="slds-modal__container">

                <lightning-card class="c-lightning-card" title="Fechas de Entrega Disponibles"
                    icon-name="utility:event">
                    <div class="btn-close-modal">
                        <lightning-button label="❌" onclick={closeModal}></lightning-button>
                    </div>
                    <div id="calendar" class="calendar-table">
                        <div>
                            <h2 class="month-year" lwc:dom="manual"></h2>
                        </div>

                        <table>
                            <thead id="calendar-body">
                                <tr>
                                    <th>Dom</th>
                                    <th>Lun</th>
                                    <th>Mar</th>
                                    <th>Mie</th>
                                    <th>Jue</th>
                                    <th>Vie</th>
                                    <th>Sab</th>
                                </tr>
                            </thead>
                            <tbody class="calendar-dates" lwc:dom="manual"></tbody>
                        </table>
                        <div id="calendar-header" class="calendar-header">
                            <lightning-button class="prev-month" label="<" onclick={prevMonth}></lightning-button>
                            <lightning-button class="next-month" label=">" onclick={nextMonth}></lightning-button>
                        </div>
                    </div>
                    <template if:true={datesEntrega}></template>
                    <div class="content-btn-lower">
                        <lightning-button class="btn-lower" label="Asignar Fecha Entrega"
                            onclick={assignFechaEntrega}></lightning-button>
                    </div>
                </lightning-card>

            </section>
        </section>
        <section class="slds-backdrop slds-backdrop_open"></section>
    </template>

    <!-- <template if:true={showScreen4}>
        <section role="dialog" tabindex="-1" class="slds-modal slds-fade-in-open">
            <section class="slds-modal__container">

                <lightning-card title="Fecha de Entrega Asignada Exitosamente...!" icon-name="utility:user">


                    <div style="padding: 10px">{currentPageReference}</div>
                    <div class="content-btn-lower">
                        <lightning-button label="Armado" onclick={nextScreen} class="btn-lower"></lightning-button>
                    </div>

                </lightning-card>

            </section>
        </section>
        <section class="slds-backdrop slds-backdrop_open"></section>
    </template> -->

    <template if:true={showScreen4}>
        <section role="dialog" tabindex="-1" class="slds-modal slds-fade-in-open">
            <section class="slds-modal__container">

                <lightning-card class="c-lightning-card" title="Fechas de Armado Disponibles" icon-name="utility:event">
                    <div class="btn-close-modal">
                        <lightning-button label="❌" onclick={closeModal}></lightning-button>
                    </div>
                    <div id="calendar-armado" class="calendar-table">
                        <div>
                            <h2 class="month-year-armado" lwc:dom="manual"></h2>
                        </div>
                        <table>
                            <thead id="calendar-armado-body">
                                <tr>
                                    <th>Dom</th>
                                    <th>Lun</th>
                                    <th>Mar</th>
                                    <th>Mie</th>
                                    <th>Jue</th>
                                    <th>Vie</th>
                                    <th>Sab</th>
                                </tr>
                            </thead>
                            <tbody class="calendar-dates-armado" lwc:dom="manual"></tbody>
                        </table>
                        <div id="calendar-armado-header" class="calendar-armado-header">
                            <lightning-button class="prev-month" label="<" onclick={prevMonthArmado}></lightning-button>
                            <lightning-button class="next-month" label=">" onclick={nextMonthArmado}></lightning-button>
                        </div>
                    </div>
                    <template if:true={datesArmado}></template>
                    <div class="content-btn-lower">
                        <lightning-button class="btn-lower" label="Asignar Fecha Armado"
                            onclick={assignFechaArmado}></lightning-button>
                    </div>
                </lightning-card>

            </section>
        </section>
        <section class="slds-backdrop slds-backdrop_open"></section>
    </template>

    <template if:true={showScreen5}>
        <section role="dialog" tabindex="-1" class="slds-modal slds-fade-in-open">
            <section class="slds-modal__container">

                <lightning-card title="Proceso Concluido Exitosamente...!" icon-name="utility:user"
                    class="final-message">


                    <div class="final-message">Ya puedes Cerrar y tomarte un café 😎</div>
                    <div class="content-btn-lower">
                        <lightning-button label="Cerrar" onclick={refreshPage} class="btn-lower"></lightning-button>
                    </div>

                </lightning-card>

            </section>
        </section>
        <section class="slds-backdrop slds-backdrop_open"></section>
    </template>
</template>